(function(){var e={defaultSettings:{url:"https://demo.chevereto.com/upload",vendor:"auto",mode:"auto",lang:"auto",autoInsert:"bbcode-embed-medium",palette:"default",init:"onload",containerClass:1,buttonClass:1,sibling:0,siblingPos:"after",fitEditor:0,observe:0,observeCache:1,html:'<div class="%cClass"><button %x class="%bClass"><span class="%iClass">%iconSvg</span><span class="%tClass">%text</span></button></div>',css:".%cClass{display:inline-block;margin-top:5px;margin-bottom:5px}.%bClass{line-height:normal;-webkit-transition:all .2s;-o-transition:all .2s;transition:all .2s;outline:0;color:%2;border:none;cursor:pointer;border:1px solid rgba(0,0,0,.15);background:%1;border-radius:.2em;padding:.5em 1em;font-size:12px;font-weight:700;text-shadow:none}.%bClass:hover{background:%3;color:%4;border-color:rgba(0,0,0,.1)}.%iClass,.%tClass{display:inline-block;vertical-align:middle}.%iClass svg{display:block;width:1em;height:1em;fill:currentColor}.%tClass{margin-left:.25em}"},ns:{plugin:"chevereto-pup"},palettes:{default:["#ececec","#333","#2980b9","#fff"],clear:["inherit","inherit","inherit","#2980b9"],turquoise:["#16a085","#fff","#1abc9c","#fff"],green:["#27ae60","#fff","#2ecc71","#fff"],blue:["#2980b9","#fff","#3498db","#fff"],purple:["#8e44ad","#fff","#9b59b6","#fff"],darkblue:["#2c3e50","#fff","#34495e","#fff"],yellow:["#f39c12","#fff","#f1c40f","#fff"],orange:["#d35400","#fff","#e67e22","#fff"],red:["#c0392b","#fff","#e74c3c","#fff"],grey:["#ececec","#000","#e0e0e0","#000"],black:["#333","#fff","#666","#fff"]},classProps:["button","container"],iconSvg:'<svg class="%iClass" xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><path d="M76.7 87.5c12.8 0 23.3-13.3 23.3-29.4 0-13.6-5.2-25.7-15.4-27.5 0 0-3.5-0.7-5.6 1.7 0 0 0.6 9.4-2.9 12.6 0 0 8.7-32.4-23.7-32.4 -29.3 0-22.5 34.5-22.5 34.5 -5-6.4-0.6-19.6-0.6-19.6 -2.5-2.6-6.1-2.5-6.1-2.5C10.9 25 0 39.1 0 54.6c0 15.5 9.3 32.7 29.3 32.7 2 0 6.4 0 11.7 0V68.5h-13l22-22 22 22H59v18.8C68.6 87.4 76.7 87.5 76.7 87.5z" style="fill: currentcolor;"/></svg>',l10n:{ar:"تحميل الصور",cs:"Nahrát obrázky",da:"Upload billeder",de:"Bilder hochladen",es:"Subir imágenes",fi:"Lataa kuvia",fr:"Importer des images",id:"Unggah gambar",it:"Carica immagini",ja:"画像をアップロード",nb:"Last opp bilder",nl:"Upload afbeeldingen",pl:"Wyślij obrazy",pt_BR:"Enviar imagens",ru:"Загрузить изображения",tr:"Resim Yukle",uk:"Завантажити зображення",zh_CN:"上传图片",zh_TW:"上傳圖片"},vendors:{default:{check:function(){return 1},getEditor:function(){var t={textarea:{name:["recaptcha","search","recipients","coppa","^comment_list","username_list","add"]},ce:{dataset:["gramm"]}};var e=["~","|","^","$","*"];var i={};for(var n in t){i[n]="";var s=t[n];for(var r in s){for(var o=0;o<s[r].length;o++){var a="";var l=s[r][o];var u=l.charAt(0);if(e.indexOf(u)>-1){a=u;l=l.substring(1)}i[n]+=":not(["+(r=="dataset"?"data-"+l:r+a+'="'+l+'"')+"])"}}}return document.querySelectorAll('[contenteditable=""]'+i.ce+',[contenteditable="true"]'+i.ce+",textarea:not([readonly])"+i.textarea)}},bbpress:{settings:{autoInsert:"html-embed-medium",html:'<input %x type="button" class="ed_button button button-small" aria-label="%text" value="%text">',sibling:"#qt_bbp_reply_content_img",siblingPos:"before"},check:"bbpEngagementJS"},discourse:{settings:{autoInsert:"markdown-embed-medium",html:'<button %x title="%text" class="upload btn no-text btn-icon ember-view"><i class="fa fa-cloud-upload d-icon d-icon-upload"></i></button>',sibling:".upload.btn",siblingPos:"before",observe:".create,#create-topic,.usercard-controls button",observeCache:0,onDemand:1},check:"Discourse"},discuz:{settings:{buttonClass:1,html:'<a %x title="%text" class="%bClass">%iconSvg</a>',sibling:".fclr,#e_attach",css:"a.%bClass,.bar a.%bClass{box-sizing:border-box;cursor:pointer;background:%1;color:%2;text-indent:unset;position:relative}.b1r a.%bClass:hover,a.%bClass:hover{background:%3;color:%4}a.%bClass{font-size:14px}.b1r a.%bClass{border:1px solid rgba(0,0,0,.15)!important;font-size:20px;padding:0;height:44px}.%bClass svg{font-size:1em;width:1em;height:1em;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);position:absolute;left:50%;top:50%;fill:currentColor}",palette:"purple"},palettes:{default:["transparent","#333","#2980b9","#fff"]},check:"DISCUZCODE",getEditor:function(){return document.querySelector('.area textarea[name="message"]')}},ipb:{settings:{autoInsert:"html-embed-medium",html:'<a %x class="cke_button cke_button_off %bClass" title="%text" tabindex="-1" hidefocus="true" role="button"><span class="cke_button_icon">%iconSvg</span><span class="cke_button_label" aria-hidden="false">%text</span><span class="cke_button_label" aria-hidden="false"></span></a>',sibling:".cke_button__ipslink",siblingPos:"before",css:".cke_button.%bClass{background:%1;position:relative}.cke_button.%bClass:hover{background:%3;border-color:%5}.cke_button.%bClass svg{font-size:15px;width:1em;height:1em;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);position:absolute;left:50%;top:50%;fill:%2}.cke_button.%bClass:hover svg{fill:%4}"},palettes:{default:["inherit","#444","","inherit"]},check:"ips",getEditorFn:function(){var t=this.getEditor().dataset.ipseditorName;return CKEDITOR.instances[t]},getEditor:function(){return document.querySelector("[data-ipseditor-name]")},editorValue:function(t){var e=CKEDITOR.dom.element.createFromHtml("<p>"+t+"</p>");this.getEditorFn().insertElement(e)},useCustomEditor:function(){return 1}},mybb:{settings:{sibling:"#quickreply_e > tr > td > *:last-child, .sceditor-container",fitEditor:0,extracss:".trow2 .%cClass{margin-bottom:0}"},check:"MyBB",getEditor:function(){if(MyBBEditor){return MyBBEditor.getContentAreaContainer().parentElement}return document.querySelector("#quickreply_e textarea")},editorValue:function(t){if(MyBBEditor){var e=MyBBEditor.inSourceMode()?"insert":"wysiwygEditorInsertHtml";MyBBEditor[e](e=="insert"?t:MyBBEditor.fromBBCode(t))}else{this.getEditor().value+=t}},useCustomEditor:function(){return!!MyBBEditor}},nodebb:{settings:{autoInsert:"markdown-embed-medium",html:'<li %x tabindex="-1" title="%text"><i class="fa fa-cloud-upload"></i></li>',sibling:'[data-format="picture-o"]',siblingPos:"before",observe:'[component="category/post"],[component="topic/reply"],[component="topic/reply-as-topic"],[component="post/reply"],[component="post/quote"]',observeCache:0,onDemand:1},check:"__nodebbSpamBeGoneCreateCaptcha__",callback:function(){var t=document.querySelectorAll(".btn-toolbar .img-upload-btn");for(var e=0;e<t.length;e++){t[e].parentNode.removeChild(t[e])}}},phpbb:{settings:{html:document.querySelector("#format-buttons *:first-child")&&document.querySelector("#format-buttons *:first-child").tagName=="BUTTON"?' <button %x type="button" class="button button-icon-only" title="%text"><i class="icon fa-cloud-upload fa-fw" aria-hidden="true"></i></button> ':' <input %x type="button" class="button2" value="%text"> ',sibling:".bbcode-img",siblingPos:"before"},check:"phpbb",getEditor:function(){if(typeof form_name==typeof undefined||typeof text_name==typeof undefined){return}return document.forms[form_name].elements[text_name]}},proboards:{settings:{html:' <input %x type="submit" value="%text"> ',css:"",sibling:"input[type=submit]",siblingPos:"before"},check:"proboards",editorValue:function(t){var e=$(".wysiwyg-textarea").data("wysiwyg");var i=e.editors[e.currentEditorName];i.setContent(i.getContent()+t)},useCustomEditor:function(){return $(".container.quick-reply").size()!==1},getEditor:function(){return document.querySelector("textarea[name=message]")}},redactor2:{getEditor:function(){var t=this.getEditorFn();if(!t){return null}return!this.useCustomEditor()?t[0]:t.$box[0]},getEditorEl:function(){return this.useCustomEditor()?this.getEditorFn().$editor[0]:this.getEditorFn()[0]},editorValue:function(t){var e="<p><br></p>";var i=this.useCustomEditor()?"innerHTML":"value";if(typeof t=="string"){if(this.useCustomEditor()){var n="<p>"+t+"</p>";this.getEditorFn().insert.html(this.editorValue()!==""?e+n:n)}else{this.getEditorEl()[i]=t}return}var s=this.getEditorEl()[i];if(this.useCustomEditor()&&s=="<p><br></p>"){return""}return this.getEditorEl()[i]},useCustomEditor:function(){return!(this.getEditorFn()instanceof jQuery)}},smf:{settings:{html:' <button %x title="%text" class="%bClass"><span class="%iClass">%iconSvg</span><span class="%tClass">%text</span></button> ',css:"%defaultCSS #bbcBox_message .%bClass{margin-right:1px;transition:none;color:%2;padding:0;width:23px;height:21px;border-radius:5px;background-color:%1}#bbcBox_message .%bClass:hover{background-color:%3}#bbcBox_message .%tClass{display:none}",sibling:"#BBCBox_message_button_1_1,.quickReplyContent + div",siblingPos:"before",fitEditor:1},palettes:{default:["#E7E7E7","#333","#B0C4D6","#333"]},check:"smf_scripturl",getEditor:function(){return smf_editorArray.length>0?smf_editorArray[0].oTextHandle:document.querySelector(".quickReplyContent textarea")}},quill:{settings:{autoInsert:"html-embed-medium",html:'<li class="richEditor-menuItem richEditor-menuItem_f1af88yq" role="menuitem"><button %x class="richEditor-button richEditor-embedButton richEditor-button_f1fodmu3" type="button" aria-pressed="false"><span class="richEditor-iconWrap_f13bdese"></span>%iconSvg</button></li>',sibling:"ul.richEditor-menuItems li.richEditor-menuItem:last-child",css:".%iClass {display: block; height: 24px; margin: auto; width: 24px;}"},check:"quill",editorValue:function(t){quill.clipboard.dangerouslyPasteHTML(quill.getText()=="\n"?0:quill.getLength(),t)},useCustomEditor:function(){return 1},getEditor:function(){return quill.container}},vanilla:{settings:{autoInsert:"markdown-embed-medium",html:'<span %x class="icon icon-cloud-upload" title="%text"></span>',sibling:".editor-dropdown-upload"},check:"Vanilla",getEditor:function(){return document.getElementById("Form_Body")}},vbulletin:{settings:{autoInsert:"html-embed-medium",html:'<li %x class="%bClass b-toolbar__item b-toolbar__item--secondary" title="%text" tabindex="0">%iconSvg</li>',sibling:".b-toolbar__item--secondary:first-child",siblingPos:"before",css:".%bClass{background:%1;color:%2;position:relative}.%bClass:hover{background:%3;color:%4;border-color:%5}.%bClass svg{font-size:15px;width:1em;height:1em;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);position:absolute;left:50%;top:50%;fill:currentColor}"},palettes:{default:["","#4B6977","","#007EB8"]},check:"vBulletin",getEditorFn:function(){var t=this.getEditor().getAttribute("ck-editorid");return CKEDITOR.instances[t]},getEditor:function(){return document.querySelector("[data-message-type]")},editorValue:function(t){var e=CKEDITOR.dom.element.createFromHtml("<p>"+t+"</p>");this.getEditorFn().insertElement(e)},useCustomEditor:function(){return 1}},WoltLab:{settings:{autoInsert:"html-embed-medium",sibling:'li[data-name="settings"]',html:'<li %x><a><span class="icon icon16 fa-cloud-upload"></span> <span>%text</span></a></li>'},check:"WBB",getEditorFn:function(){var t=$("#text").data("redactor");if(t){return t}return null}},XF1:{settings:{autoInsert:"html-embed-medium",containerClass:1,buttonClass:1,html:'<li class="%cClass"><a %x class="%bClass" unselectable="on" title="%text">%iconSvg</a></li>',sibling:".redactor_btn_container_image",siblingPos:"before",css:"li.%cClass .%bClass{background:%1;color:%2;text-indent:unset;border-radius:3px;position:relative}li.%cClass a.%bClass:hover{background:%3;color:%4;border-color:%5}.%cClass .%bClass svg{font-size:15px;width:1em;height:1em;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);position:absolute;left:50%;top:50%;fill:currentColor}",observe:".edit.OverlayTrigger",observeCache:1},palettes:{default:["none","inherit","none","inherit",""]},check:"XenForo",getEditorFn:function(){var t=document.querySelector("#exposeMask")&&document.querySelector("#exposeMask").offsetParent?".xenOverlay form":"form";if(t!=="form"){var e=document.querySelectorAll(t);for(var i=0;i<e.length;i++){if(e[i].offsetParent){t+='[action="'+e[i].getAttribute("action")+'"]';break}}}return XenForo.getEditorInForm(t)},getEditor:function(){var t=this.getEditorFn();if(!t){return null}return!this.useCustomEditor()?t[0]:t.$box[0]},getEditorEl:function(){return this.useCustomEditor()?this.getEditorFn().$editor[0]:this.getEditorFn()[0]},editorValue:function(t){var e="<p><br></p>";var i=this.useCustomEditor()?"innerHTML":"value";if(typeof t=="string"){if(this.useCustomEditor()){var n="<p>"+t+"</p>";this.getEditorFn().insertHtml(this.editorValue()!==""?e+n:n)}else{this.getEditorEl()[i]=t}return}var s=this.getEditorEl()[i];if(this.useCustomEditor()&&s=="<p><br></p>"){return""}return this.getEditorEl()[i]},useCustomEditor:function(){return!(this.getEditorFn()instanceof jQuery)}},XF2:{settings:{autoInsert:"html-embed-medium",containerClass:1,buttonClass:1,html:' <a %x class="%bClass button button--link button button--icon button--icon--upload"><span class="button-text">%text</span></a> ',sibling:".js-attachmentUpload",siblingPos:"before",observe:'[data-xf-click="quick-edit"]',observeCache:1},palettes:{default:["transparent","#505050","rgba(20,20,20,0.06)","#141414"]},check:"XF",getEditorFn:function(t){var e=".js-editor";if(typeof t=="string"){e=this.getEditorSel(t)}return XF.getEditorInContainer($(e))},getEditorSel:function(t){return"["+e.ns.dataPluginTarget+'="'+t+'"]'},getEditor:function(t){if(typeof t=="string"){return document.querySelector(this.getEditorSel(t))}return document.querySelectorAll(".js-editor")},getBbCode:function(t){return t.getTextArea()[0].value},editorValue:function(t,e){var i="<p><br></p>";var n=this.getEditorFn(e);var s=n.ed.bbCode.isBbCodeView()?["bbCode","getBbCode","insertBbCode"]:["html","get","insert"];var r=n.ed[s[0]];if(typeof t=="string"){var o=this.editorValue(false,e)!=="";if(s[0]=="html"){var a="<p>"+t+"</p>";r[s[2]](o?i+a:a)}else{var l=XF.ajax("POST",XF.canonicalizeUrl("index.php?editor/to-bb-code"),{html:t});l.done(function(t){r[s[2]](o?"\n"+t.bbCode:t.bbCode)})}return}if(typeof r[s[1]]==typeof undefined){var u=this.getBbCode(r)}else{var u=r[s[1]]()}if(this.useCustomEditor()&&u==i){return""}return u},useCustomEditor:function(){return typeof XF.getEditorInContainer($(".js-editor"))!==typeof undefined}}},generateGuid:function(){var i=(new Date).getTime();if(typeof performance!=="undefined"&&typeof performance.now==="function"){i+=performance.now()}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=(i+Math.random()*16)%16|0;i=Math.floor(i/16);return(t==="x"?e:e&3|8).toString(16)})},getNewValue:function(t,e){var i=typeof t.getAttribute("contenteditable")!=="string"?"value":"innerHTML";var n=i=="value"?"\n":"<br>";var s=t[i];var r=e;var o=false;if(o){r=String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}if(s.length==0){return r}var a="";var l=s.match(/\n+$/g);var u=l?l[0].split("\n").length:0;if(u<=2){var d=u==0?2:1;a+=n.repeat(d)}return a+r},insertTrigger:function(){var t=this.vendors[this.settings.vendor];var e=!this.settings.sibling?0:document.querySelectorAll(this.settings.sibling+":not(["+this.ns.dataPlugin+"])")[0];var i;if(this.settings.mode=="auto"){i=this.vendors[t.hasOwnProperty("getEditor")?this.settings.vendor:"default"].getEditor()}else{var n=document.querySelectorAll("["+this.ns.dataPluginTrigger+"][data-target]:not(["+this.ns.dataPluginId+"])");var s=[];for(var r=0;r<n.length;r++){s.push(n[r].dataset.target)}if(s.length>0){i=document.querySelectorAll(s.join(","))}}if(!i){return}if(!document.getElementById(this.ns.pluginStyle)&&this.settings.css){var o=document.createElement("style");var a=this.settings.css;a=this.appyTemplate(a);o.type="text/css";o.innerHTML=a.replace(/%p/g,"."+this.ns.plugin);o.setAttribute("id",this.ns.pluginStyle);document.body.appendChild(o)}if(!(i instanceof NodeList)){i=[i]}var l=0;for(var r=0;r<i.length;r++){if(i[r].getAttribute(this.ns.dataPluginTarget)){continue}var u=e?e:i[r];u.setAttribute(this.ns.dataPlugin,"sibling");u.insertAdjacentHTML({before:"beforebegin",after:"afterend"}[this.settings.siblingPos],this.appyTemplate(this.settings.html));var d=u.parentElement.querySelector("["+this.ns.dataPluginTrigger+"]");this.setBoundId(d,i[r]);l++}this.triggerCounter=l;if(typeof t.callback=="function"){t.callback.call()}},appyTemplate:function(t){if(!this.cacheTable){var e=[{"%iconSvg":this.iconSvg},{"%text":this.settings.langString}];if(this.palette){var i=/%(\d+)/g;var n=i.exec(t);var s=[];while(n!==null){if(s.indexOf(n[1])==-1){s.push(n[1])}n=i.exec(t)}if(s){s.sort(function(t,e){return e-t});var r=this.vendors[this.settings.vendor];for(var o=0;o<s.length;o++){var a=s[o]-1;var l=this.palette[a]||"";if(!l&&this.settings.vendor!=="default"&&this.settings.palette!=="default"){l=this.palette[a-2]}var u={};u["%"+s[o]]=l;e.push(u)}}}var d=this.settings.buttonClass||this.ns.plugin+"-button";var c=[{"%cClass":this.settings.containerClass||this.ns.plugin+"-container"},{"%bClass":d},{"%iClass":d+"-icon"},{"%tClass":d+"-text"},{"%x":this.ns.dataPluginTrigger},{"%p":this.ns.plugin}];for(var o=0;o<c.length;o++){e.push(c[o])}this.cacheTable=e}return this.strtr(t,this.cacheTable)},strtr:function(t,e){var t=t.toString();if(!t||typeof e==typeof undefined){return t}for(var i=0;i<e.length;i++){var n=e[i];for(var s in n){if(typeof n[s]!==typeof undefined){re=new RegExp(s,"g");t=t.replace(re,n[s])}}}return t},setBoundId:function(t,e){var i=this.generateGuid();t.setAttribute(this.ns.dataPluginId,i);e.setAttribute(this.ns.dataPluginTarget,i)},openPopup:function(t){if(typeof t!=="string"){return}var e=this;if(typeof this.popups==typeof undefined){this.popups={}}if(typeof this.popups[t]!==typeof undefined){this.popups[t].window.focus();return}else{this.popups[t]={}}var i={l:window.screenLeft!=undefined?window.screenLeft:screen.left,t:window.screenTop!=undefined?window.screenTop:screen.top,w:window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,h:window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height};var n={w:720,h:690};var s={w:.5,h:.85};for(var r in n){if(n[r]/i[r]>s[r]){n[r]=i[r]*s[r]}}var o={l:Math.trunc(i.w/2-n.w/2+i.l),t:Math.trunc(i.h/2-n.h/2+i.t)};this.popups[t].window=window.open(this.settings.url,t,"width="+n.w+",height="+n.h+",top="+o.t+",left="+o.l);this.popups[t].timer=window.setInterval(function(){if(!e.popups[t].window||e.popups[t].window.closed!==false){window.clearInterval(e.popups[t].timer);e.popups[t]=undefined}},200)},postSettings:function(t){this.popups[t].window.postMessage({id:t,settings:this.settings},this.settings.url)},liveBind:function(s,t,r){document.addEventListener(t,function(t){var e=document.querySelectorAll(s);if(!e){return}var i=t.target;var n=-1;while(i&&(n=Array.prototype.indexOf.call(e,i))===-1){i=i.parentElement}if(n>-1){t.preventDefault();r.call(t,i)}},true)},prepare:function(){var e=this;this.ns.dataPlugin="data-"+this.ns.plugin;this.ns.dataPluginId=this.ns.dataPlugin+"-id";this.ns.dataPluginTrigger=this.ns.dataPlugin+"-trigger";this.ns.dataPluginTarget=this.ns.dataPlugin+"-target";this.ns.pluginStyle=this.ns.plugin+"-style";this.ns.selDataPluginTrigger="["+this.ns.dataPluginTrigger+"]";var t=document.currentScript||document.getElementById(this.ns.plugin+"-src");if(!t){t={dataset:{}}}else if(t.dataset["buttonTemplate"]){t.dataset["html"]=t.dataset["buttonTemplate"]}var i=0;this.settings={};for(var n in this.defaultSettings){var s=t&&t.dataset[n]?t.dataset[n]:this.defaultSettings[n];if(s==="1"||s==="0"){s=s=="true"}if(typeof s=="string"&&this.classProps.indexOf(n.replace(/Class$/,""))>-1){i=1}this.settings[n]=s}if(this.settings.vendor=="auto"){this.settings.vendor="default";this.settings.fitEditor=0;for(var n in this.vendors){if(n=="default")continue;if(typeof window[this.vendors[n].check]!==typeof undefined){this.settings.vendor=n;break}}}var r=["lang","url","vendor","target"];if(this.settings.vendor=="default"){this.vendors.default.settings={}}var o=this.vendors[this.settings.vendor];if(o.settings){for(var n in o.settings){if(!t||!t.dataset.hasOwnProperty(n)){this.settings[n]=o.settings[n]}}}else{o.settings={};for(var n in this.defaultSettings){if(r.indexOf(n)==-1){o.settings[n]=this.defaultSettings[n]}}}if(this.settings.vendor!=="default"){if(!o.settings.hasOwnProperty("fitEditor")&&!t.dataset.hasOwnProperty("fitEditor")){this.settings.fitEditor=1}if(this.settings.fitEditor){i=!o.settings.css}else{var r=["autoInsert","observe","observeCache"];for(var n in o.settings){if(r.indexOf(n)==-1&&!t.dataset.hasOwnProperty(n)){this.settings[n]=this.defaultSettings[n]}}}}if(i){this.settings.css=""}else{this.settings.css=this.settings.css.replace("%defaultCSS",this.defaultSettings.css);if(o.settings.extracss&&this.settings.css){this.settings.css+=o.settings.extracss}var a=this.settings.palette.split(",");if(a.length>1){this.palette=a}else if(!this.palettes.hasOwnProperty(a)){this.settings.palette="default"}if(!this.palette){this.palette=(this.settings.fitEditor&&o.palettes&&o.palettes[this.settings.palette]?o:this).palettes[this.settings.palette]}}var l=this.classProps;for(var u=0;u<l.length;u++){var d=l[u]+"Class";if(typeof this.settings[d]!=="string"){this.settings[d]=this.ns.plugin+"-"+l[u];if(this.settings.fitEditor){this.settings[d]+="--"+this.settings.vendor}}}var c=(this.settings.lang=="auto"?navigator.language||navigator.userLanguage:this.settings.lang).replace("-","_");this.settings.langString="Upload images";var g=c in this.l10n?c:c.substring(0,2)in this.l10n?c.substring(0,2):null;if(g){this.settings.langString=this.l10n[g]}var f=document.createElement("a");f.href=this.settings.url;this.originUrlPattern="^"+(f.protocol+"//"+f.hostname).replace(/\./g,"\\.").replace(/\//g,"\\/")+"$";var h=document.querySelectorAll(this.ns.selDataPluginTrigger+"[data-target]");if(h.length>0){for(var u=0;u<h.length;u++){var p=document.querySelector(h[u].dataset.target);this.setBoundId(h[u],p)}}if(this.settings.observe){var b=this.settings.observe;if(this.settings.observeCache){b+=":not(["+this.ns.dataPlugin+"])"}this.liveBind(b,"click",function(t){t.setAttribute(e.ns.dataPlugin,1);e.observe()}.bind(this))}if(this.settings.sibling&&!this.settings.onDemand){this.waitForSibling()}else{if(this.settings.init=="onload"){if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",function(t){e.init()},false)}else{this.init()}}else{this.observe()}}},observe:function(){this.waitForSibling("observe")},waitForSibling:function(t){var e=this.initialized?"insertTrigger":"init";if(this.settings.sibling){var i=document.querySelector(this.settings.sibling+":not(["+this.ns.dataPlugin+"])")}else if(t=="observe"){this[e]();if(this.triggerCounter){return}}if(!i){if(document.readyState==="complete"&&t!=="observe"){return}setTimeout((t=="observe"?this.observe:this.waitForSibling).bind(this),250)}else{this[e]()}},init:function(){this.insertTrigger();var l=this;var u=this.vendors[this.settings.vendor];this.liveBind(this.ns.selDataPluginTrigger,"click",function(t){var e=t.getAttribute(l.ns.dataPluginId);l.openPopup(e)});if(document.head.getAttribute("data-chevereto-addUploadHandler")!=1){window.addEventListener("message",t,!1);document.head.setAttribute("data-chevereto-addUploadHandler",1)}function t(t){var e=new RegExp(l.originUrlPattern,"i");if(!e.test(t.origin)&&(typeof t.data.id==typeof undefined||typeof t.data.message==typeof undefined)){return}var i=t.data.id;if(!i||t.source!==l.popups[i].window){return}if(t.data.requestAction&&l.hasOwnProperty(t.data.requestAction)){l[t.data.requestAction](i);return}var n;if(l.settings.vendor!=="default"){if(u.hasOwnProperty("useCustomEditor")&&u.useCustomEditor()){u.editorValue(t.data.message,i);return}else if(u.hasOwnProperty("getEditor")){n=u.getEditor()}}if(!n){n=document.querySelector("["+l.ns.dataPluginTarget+'="'+i+'"]');if(!n){alert("Target not found");return}}var s=n.getAttribute("contenteditable")===null?"value":"innerHTML";n[s]+=l.getNewValue(n,t.data.message);var r=["blur","focus","input","change","paste"];for(var o=0;o<r.length;o++){var a=new Event(r[o]);n.dispatchEvent(a)}}this.initialized=1}};var t=["WoltLab","XF1"];for(var i=0;i<t.length;i++){e.vendors[t[i]]=Object.assign(Object.assign({},e.vendors.redactor2),e.vendors[t[i]])}e.prepare()})();